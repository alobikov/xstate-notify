(this["webpackJsonpxstate-notify"]=this["webpackJsonpxstate-notify"]||[]).push([[0],{1085:function(e,t,n){},1136:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(92),s=n.n(o),c=(n(613),n(614),n(33)),i=n(212),l=n(15),u=n.n(l),d=n(34),m=n(326),p=n(12),g={MASTER_KEY:"lTkaAkYe0jKDFfFEpdWZmgs8jqQwBqwlQyDjKPBS",APP_ID:"iCYTGvNAatQe64smIVqoOidyKKoPx4N0qq3zdH2o",JS_KEY:"hFVZ6Krhye8JsgfNw5LE6VejsUQka8Pd91eYt01L"},f=n(615);function b(e){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(u.a.mark((function e(t){var n,a,r,o,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.username,a=t.email,r=t.password,o=function(e){return e.split(/\s*[\s,]\s*/).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},f.User.current()&&f.User.logOut(),(s=new f.User).set("name","web_user"),s.set("password",r),console.log("userSignUpAsync"),console.log({username:n,email:a,password:r}),void 0!==n){e.next=17;break}return s.set("username",a),console.log("parse userSignUp() signIn tread"),e.next=14,s.logIn();case 14:c=e.sent,e.next=27;break;case 17:return console.log("parse userSignUp() signUp tread"),s.set("username",o(n)),s.set("email",a),console.log("before signUp seesion Token: "),e.next=23,s.signUp();case 23:return c=(c=e.sent).toJSON(),e.next=27,T(o(n),c.objectId);case 27:return console.log(c.get("sessionToken")),c=c.toJSON(),e.abrupt("return",c);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return h.apply(this,arguments)}function h(){return(h=Object(d.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.Object.extend("Messages"),(a=new f.Query(n)).equalTo("to",t),e.next=5,a.find();case 5:return r=e.sent,console.log(r.length+" messages"),console.log(r[0]),e.abrupt("return",r.map((function(e){return{objectId:e.id,from:e.get("from"),timestamp:e.get("timestamp"),body:e.get("body"),title:e.get("title")}})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return x.apply(this,arguments)}function x(){return(x=Object(d.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.Object.extend("Messages"),(a=new f.Query(n)).equalTo("from",t),e.next=5,a.find();case 5:return r=e.sent,console.log(r.length+" messages"),console.log(r[0]),e.abrupt("return",r.map((function(e){return{objectId:e.id,to:e.get("to"),timestamp:e.get("timestamp"),body:e.get("body"),title:e.get("title")}})).filter((function(e){var t;return!(null===(t=e.title)||void 0===t?void 0:t.includes("DEL"))})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return j.apply(this,arguments)}function j(){return(j=Object(d.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=f.Object.extend("Messages"),new f.Query(a).get(t).then((function(e){e.set("title","".concat(e.get("title")||""," ").concat(n.trim())),e.save().then((function(e){return null}),(function(e){return"Error while updating "+e}))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,n){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(u.a.mark((function e(t,n,a){var r,o,s,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.Object.extend("Messages"),o=new r,s=new Date,c=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2)+" "+("0"+s.getHours()).slice(-2)+":"+("0"+s.getMinutes()).slice(-2),o.set("from",t),o.set("body",a),o.set("to",n),o.set("timestamp",c),e.next=10,o.save();case 10:return i=e.sent,console.log("yyyyyyyyyyyyyyyyyyyy"),console.dir(i),e.abrupt("return",{objectId:i.id,body:i.get("body"),from:i.get("from"),to:i.get("to"),timestamp:i.get("timestamp")});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(u.a.mark((function e(t){var n,a,r,o,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collection,a=t.column,r=t.searchItem,o=f.Object.extend(n),s=new f.Query(o),r?s.equalTo(a,r):s.find(),e.next=6,s.find();case 6:if(0!==(c=e.sent).length){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return k.apply(this,arguments)}function k(){return(k=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({collection:"Users"});case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{username:e.get("username"),objectId:e.id}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return M.apply(this,arguments)}function M(){return(M=Object(d.a)(u.a.mark((function e(t){var n,a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.Object.extend("Messages"),a=new f.Query(n),e.next=4,a.get(t);case 4:return r=e.sent,e.next=7,r.destroy();case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return _.apply(this,arguments)}function _(){return(_=Object(d.a)(u.a.mark((function e(t,n){var a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({collection:"Users",column:"username",searchItem:t});case 2:null===(a=e.sent)?(console.log("Creating new Users record"),r=f.Object.extend("Users"),(o=new r).set("username",t),o.set("userObjId",n),o.set("deviceId","web"),o.save().then((function(e){console.log("New object created with objectId: "+e.id)}),(function(e){console.log("Failed to create new object, with error code: "+e.message)}))):a>1&&console.log("!!! the mess detected in Users collection !!!");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=r.a.createContext(),L=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,r,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("doLogin() invoked"),console.log(n),e.next=4,new Promise((function(e){return setTimeout(e,1e3)}));case 4:return e.next=6,b(n);case 6:return a=e.sent,r=a.objectId,o=a.username,s=a.email,e.abrupt("return",{username:o,email:s,objectId:r});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=Object(m.a)({id:"app",initial:"init",context:{user:void 0,error:void 0,isLoading:!1},states:{init:{entry:function(){console.log("parseInit() APP_ID: "+g.APP_ID),f.serverURL="https://notifyme.back4app.io",f.initialize(g.APP_ID,g.JS_KEY)},on:{"":"auth"}},auth:{id:"auth",initial:"idle",states:{idle:{on:{LOGIN:"started",SIGNUP:"started"}},started:{entry:function(e,t){return console.log("auth.started.entry")},invoke:{id:"doLogin",src:L,onDone:{target:"success",actions:Object(p.b)({user:function(e,t){return t.data}})},onError:{target:"fail",actions:Object(p.b)({error:function(e,t){return t.data}})}}},success:{on:{"":"home"}},fail:{on:{}},home:{id:"home",initial:"homeidle",states:{homeidle:{}}}}}}}),R=(n(958),n(218)),U=n(67),P=r.a.createContext(),$=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,1)}));case 2:return e.next=4,C();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t.user.username);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t.user.username);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(n.payload);case 2:return e.abrupt("return",t.messages.filter((function(e){return e.objectId!==n.payload})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(n.payload,"DEL");case 2:return e.abrupt("return",t.outbox.filter((function(e){return e.objectId!==n.payload})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(n.payload,"READ");case 2:return e.abrupt("return",t.messages.map((function(e){return e.objectId!==n.payload?e:(console.log("changing title"),Object(U.a)({},e,{title:((e.title||"")+" READ").trim()}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.payload.to[0],e.next=3,w(t.user.username,a,n.payload.body);case 3:r=e.sent,a===t.user.username&&(t.messages=[r].concat(Object(R.a)(t.messages))),t.outbox=[r].concat(Object(R.a)(t.outbox));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=Object(m.a)({id:"home",initial:"idle",context:{user:{},msgInForm:"",messages:[],outbox:[],allContacts:[],addressees:[],clearBtnDis:!0},states:{idle:{entry:[Object(p.b)({messages:[{from:"Pavel Troller",body:"initially assigned message",objectId:"1",timestamp:"10 mins ago",title:"DEL READ"}],msgInForm:"",outbox:[],allContacts:[],addressees:[],clearBtnDis:!0})],invoke:{id:"getAddressees",src:$,onDone:{target:"msgLoading",actions:Object(p.b)({allContacts:function(e,t){return t.data}})},onError:{target:"msgLoading",actions:Object(p.b)({error:function(e,t){return"there is problem fetching contacts"}})}}},msgLoading:{invoke:{id:"getMessages",src:B,onDone:{target:"outboxLoading",actions:Object(p.b)({messages:function(e,t){return t.data}})},onError:{target:"outboxLoading",actions:Object(p.b)({error:function(e,t){return"there is problem fetching messages"}})}}},outboxLoading:{invoke:{id:"getOutbox",src:W,onDone:{target:"ready",actions:Object(p.b)({outbox:function(e,t){return console.log(t.data),t.data}})},onError:{target:"ready",actions:Object(p.b)({error:function(e,t){return"there is problem fetching messages"}})}}},ready:{id:"ready",type:"parallel",states:{sender:{id:"sender",initial:"addrFieldEmpty",states:{addrFieldEmpty:{entry:Object(p.b)({clearBtnDis:!0}),on:{ADD_ADDRESSEE:{target:"addrFillStarted",actions:"addAddressee"}}},addrFillStarted:{entry:Object(p.b)({clearBtnDis:!1}),on:{"":[{target:"addrFillCompleted",cond:"addrLimit"}],DEL_ADDRESSEE:[{target:"addrFieldEmpty",cond:"addrEmpty",actions:["delAddressee"]},{actions:["delAddressee"]}],ADD_ADDRESSEE:[{target:"addrFillStarted",cond:"duplicatedAddr"},{actions:"addAddressee"}]}},addrFillCompleted:{on:{DEL_ADDRESSEE:{target:"addrFillStarted",actions:["delAddressee"]}}},sendingMessage:{invoke:{id:"dispatchMessage",src:K,onDone:{target:"addrFieldEmpty",actions:"clearMessage"},onError:{target:"addrFieldEmpty",actions:Object(p.b)({error:function(e,t){return"there is problem sending message"}})}}}},on:{CLEAR_MESSAGE:{target:".addrFieldEmpty",actions:["clearMessage"]},SEND_MESSAGE:{target:".sendingMessage",actions:["clearMessage"]},MESSAGE_DATA:{actions:"receiveTyping"},ADDR_COMPLETE:".addrFillCompleted"}},messenger:{id:"messenger",initial:"inbox",states:{inbox:{on:{DEL_INBOX_ITEM:"deletingInboxItem",MARK_MESSAGE_READ:"markingMessage"}},outbox:{on:{DEL_OUTBOX_MESSAGE:"deletingOutboxMessage"}},chat:{},deletingInboxItem:{invoke:{id:"deleteInboxItem",src:G,onDone:{target:"inbox",actions:Object(p.b)({messages:function(e,t){return t.data}})},onError:{target:"inbox",actions:Object(p.b)({error:function(e,t){return"there is problem fetching contacts"}})}}},deletingOutboxMessage:{invoke:{src:H,id:"deleteOutboxMessage",onDone:{target:"outbox",actions:Object(p.b)({outbox:function(e,t){return t.data}})},onError:{target:"outbox",actions:Object(p.b)({error:function(e,t){return"there is problem 'deleting' outbox item"}})}}},markingMessage:{invoke:{src:z,id:"markMessage",onDone:{target:"inbox",actions:Object(p.b)({messages:function(e,t){return t.data}})},onError:{target:"inbox",actions:Object(p.b)({error:function(e,t){return"there is problem setting message title"}})}}}},on:{SWITCH_TO_OUTBOX:".outbox",SWITCH_TO_INBOX:".inbox",SWITCH_TO_CHAT:".chat"}}}},success:{},fail:{}}},{guards:{addrLimit:function(e,t){return 3===e.addressees.length},addrEmpty:function(e,t){return 1===e.addressees.length},duplicatedAddr:function(e,t){return e.addressees.includes(t.payload)}},actions:{delAddressee:Object(p.b)({addressees:function(e,t){return console.log("delAddressee"),console.dir(t),e.addressees.filter((function(e){return e!==t.payload}))}}),addAddressee:Object(p.b)({addressees:function(e,t){var n=t.payload;return[].concat(Object(R.a)(e.addressees),[n])}}),sendMessage:Object(p.b)({messages:function(e,t){return[].concat(Object(R.a)(e.messages),[{body:e.msgInForm,objectId:e.msgInForm.slice(0,5)}])}}),clearMessage:Object(p.b)({addressees:[],msgInForm:""}),receiveTyping:Object(p.b)({msgInForm:function(e,t){return t.payload},clearBtnDis:!1})}}),Q=n(587),X=n(1188);function J(){return r.a.createElement("div",null,r.a.createElement(Q.a,{style:{height:"3.2rem"},attached:"top",color:"blue",inverted:!0},r.a.createElement(X.a,{item:!0,icon:"list"}),r.a.createElement(Q.a.Header,{as:"div",style:{paddingTop:"0.5em",fontSize:"22px",color:"#ccc",margin:"0 auto"},content:"Notify"})))}n(1085);var Y=n(1191),V=n(130),Z=n(372),ee=n(1186),te=n(1174);function ne(){var e={adr_btn:{padding:".5rem 0rem 0.5rem 0.7rem",borderRadius:"1rem",marginLeft:"0.5rem",fontWeight:600}},t=r.a.useContext(P),n=Object(c.a)(t,2),a=n[0],o=n[1],s=function(e){return o({type:"DEL_ADDRESSEE",payload:e})},i=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o("CLEAR_MESSAGE"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(a.value),console.log(a.context);return r.a.createElement(Z.a,null,r.a.createElement(Z.a,{basic:!0,textAlign:"left",style:{padding:"0px"}},"Send to:",a.context.addressees.map((function(t){return r.a.createElement(Y.a,{onClick:s.bind(null,t),style:e.adr_btn,key:t,basic:!0,size:"tiny"},t,"\xa0 \xa0",r.a.createElement(V.a,{name:"delete"}))}))),r.a.createElement(ee.a,null,r.a.createElement(te.a,{rows:3,placeholder:"Compose your message",onChange:function(e){return o({type:"MESSAGE_DATA",payload:e.target.value})},value:a.context.msgInForm})),r.a.createElement(Z.a,{as:"div",basic:!0,style:{padding:"0px",display:"flex",justifyContent:"right"}},r.a.createElement(Y.a,{active:!0,className:"btnsend",disabled:!a.context.msgInForm||!a.context.addressees,onClick:function(e){console.log(e),o({type:"SEND_MESSAGE",payload:e})}.bind(null,{body:a.context.msgInForm,to:a.context.addressees}),size:"tiny",color:"twitter"},r.a.createElement(V.a,{name:"send"}),"Send"),r.a.createElement(Y.a,{disabled:a.context.clearBtnDis,onClick:i,size:"tiny",color:"google plus"},r.a.createElement(V.a,{name:"delete"}),"Clear")))}n(256);var ae=n(152),re=n(1187);function oe(e){var t=e.contacts;return r.a.createElement(Z.a,{style:{paddingRight:5}},r.a.createElement(ae.a,{style:{maxHeight:"88vh"}},r.a.createElement("div",{style:{paddingLeft:"2",paddingRight:"7px",width:"100%",display:"block"}},r.a.createElement(re.a,{animated:!0,divided:!0,relaxed:!0},t.map((function(e){return r.a.createElement(se,{addressee:e.username,key:e.objectId})}))))))}var se=function(e){var t=e.addressee,n={icon:{paddingTop:"0.2rem"},item:{color:"black",textAlign:"left"}},a=r.a.useContext(P),o=Object(c.a)(a,2),s=(o[0],o[1]);return r.a.createElement(re.a.Item,{onClick:function(e){s({type:"ADD_ADDRESSEE",payload:e})}.bind(null,t)},r.a.createElement(re.a.Icon,{style:n.icon,name:"user",size:"small",color:"grey"}),r.a.createElement(re.a.Content,{as:"a",style:n.item},t.split(/\s*[\s,]\s*/).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")))},ce=n(1189),ie=n(1173),le=n(576),ue=n(577),de=n.n(ue);function me(){console.log("*** Messenger rendered ***");var e=r.a.useContext(P),t=Object(c.a)(e,2),n=t[0],a=t[1];return console.log(n.value),console.log(n.context),r.a.createElement("div",null,r.a.createElement(ae.a,{style:{maxHeight:"58.6vh"}},r.a.createElement("div",{style:{paddingRight:"0px",margin:"0px",width:"100%",display:"block"}},r.a.createElement(re.a,{animated:!0,relaxed:!0,style:{margin:6}},n.context.messages.map((function(e){return r.a.createElement(pe,{message:e,key:e.objectId,send:a})}))),console.log("assssssssssssssssssssssssssssssss"))))}function pe(e){var t,n,a=e.message,o=e.send,s=Object(le.a)(de.a),i=(Object(c.a)(s,1)[0],{flexContainer:{display:"flex",flexFlow:"row",padding:"0px 4px"},flexConCol:{display:"flex",flexFlow:"column",textAlign:"start"},from:{flex:1,fontSize:"0.9rem"},body:{flex:1,textAlign:"start"},time:{color:"#999",fontSize:"0.8rem"},buttons:{margin:"auto"},divider:{borderLeft:"1px solid #bbb",margin:"5px 0px",marginLeft:"6px",marginRight:"6px"}});return r.a.createElement(Z.a,{onClick:(null===(t=a.title)||void 0===t?void 0:t.includes("READ"))?null:function(e){console.log("mark read 6666666666666666666666666"),o({type:"MARK_MESSAGE_READ",payload:e})}.bind(null,a.objectId),attached:!0,className:"listitem",style:i.flexContainer},r.a.createElement("div",{style:i.flexConCol},r.a.createElement("div",{style:i.from},r.a.createElement("strong",null,"from: ",a.from.split(/\s*[\s,]\s*/).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "))),r.a.createElement("div",{style:i.time},a.timestamp)),r.a.createElement("div",{style:i.divider}),r.a.createElement("div",{style:i.body},(null===(n=a.title)||void 0===n?void 0:n.includes("READ"))?a.body:r.a.createElement("strong",null,a.body)),r.a.createElement("div",{style:i.divider}),r.a.createElement("div",{style:i.buttons},r.a.createElement(ie.a,{className:"checkbox"})),r.a.createElement("div",{className:"icon"},r.a.createElement(V.a,{onMouseEnter:function(e){e.target.style.color="red"},onMouseOut:function(e){e.target.style.color="grey"},onClick:function(e){console.log("delete $$$$$$$$$$$$$$$$$$$$$$$$"),o({type:"DEL_INBOX_ITEM",payload:e})}.bind(null,a.objectId),name:"trash alternate"})))}function ge(){console.log("*** Messenger rendered ***");var e=r.a.useContext(P),t=Object(c.a)(e,2),n=t[0],a=t[1];return console.log(n.value),console.log(n.context),r.a.createElement(ae.a,{style:{maxHeight:"58.6vh"}},r.a.createElement("div",{style:{paddingRight:"0px",margin:"0px",width:"100%",display:"block"}},r.a.createElement(re.a,{animated:!0,relaxed:!0,style:{margin:6}},n.context.outbox.map((function(e){return r.a.createElement(fe,{message:e,key:e.objectId,send:a})})))))}function fe(e){var t=e.message,n=e.send,a={flexContainer:{display:"flex",flexFlow:"row",padding:"0px 4px"},flexConCol:{display:"flex",flexFlow:"column",textAlign:"start"},addressee:{flex:1,fontSize:"0.9rem"},body:{flex:1,textAlign:"start"},time:{color:"#999",fontSize:"0.8rem"},buttons:{margin:"auto"},divider:{borderLeft:"1px solid #bbb",margin:"5px 0px",marginLeft:"6px",marginRight:"6px"}},o=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:"DEL_OUTBOX_MESSAGE",payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Z.a,{className:"listitem",attached:!0,style:a.flexContainer},r.a.createElement("div",{style:a.flexConCol},r.a.createElement("div",{style:a.addressee},r.a.createElement("strong",null,"to: ",t.to.split(/\s*[\s,]\s*/).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "))),r.a.createElement("div",{style:a.time},t.timestamp)),r.a.createElement("div",{style:a.divider}),r.a.createElement("div",{style:a.body},t.body),r.a.createElement("div",{style:a.divider}),r.a.createElement("div",{style:a.buttons},r.a.createElement(ie.a,{className:"checkbox"})),r.a.createElement("div",{className:"icon"},r.a.createElement(V.a,{onMouseEnter:function(e){e.target.style.color="red"},onMouseOut:function(e){e.target.style.color="grey"},onClick:o.bind(null,t.objectId),name:"trash alternate"})))}var be=function(){var e=r.a.useContext(P),t=Object(c.a)(e,2),n=t[0],a=t[1],o=n.context.messages.reduce((function(e,t){var n;return(null===(n=t.title)||void 0===n?void 0:n.includes("READ"))?e:e+1}),0),s=["SWITCH_TO_INBOX","SWITCH_TO_OUTBOX","SWITCH_TO_CHAT"],i=[{menuItem:0!==o?"Inbox (".concat(o,")"):"Inbox",render:function(){return r.a.createElement(ce.a.Pane,{as:"div",style:{padding:"0px"}},r.a.createElement(me,null))}},{menuItem:"Outbox",render:function(){return r.a.createElement(ce.a.Pane,{as:"div",style:{padding:"0px"}},r.a.createElement(ge,null))}},{menuItem:"Chat",render:function(){return r.a.createElement(ce.a.Pane,{attached:!1},"Chat Content - To be done")}}];return r.a.createElement(Z.a,{style:{width:"100%",paddingRight:5}},r.a.createElement(ce.a,{onTabChange:function(e,t){a(s[t.activeIndex])},menu:{secondary:!0,color:"blue",pointing:!0},panes:i}))};function Ee(e){var t=e.user;console.log("*** Home rendered ***");var n=q.withContext({user:t}),a=Object(i.useMachine)(n,{devTools:!0}),o=Object(c.a)(a,2),s=o[0],l=o[1];return console.log(s.value),console.log(s.context),console.log(s.event),r.a.createElement(P.Provider,{value:[s,l]},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"layout"},r.a.createElement(J,null),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"contacts"},r.a.createElement(oe,{contacts:s.context.allContacts})),r.a.createElement("div",{className:"sender"},r.a.createElement(ne,null)),r.a.createElement("div",{className:"messenger"},r.a.createElement(be,null))))))}var ye=n(210),he=n(43),ve=n(266),xe=n(580),Oe=n.n(xe),je=n(1184),we=n(1179),Se=n(1185),Ie=n(1180),Ae=n(589),Ce=n(1175),ke=n(1178),De=n(584),Me=n.n(De),Te=n(585),_e=n.n(Te),Fe=n(1182),Le=n(1183),Ne=n(14),Re=n(1192),Ue=n(1193),Pe=n(1190),$e=n(1181),Be=n(1177),We=Object(Ce.a)((function(e){return{root:{width:"100%","& > * + *":{},paddingTop:10}}}));function Ge(){var e=We();return r.a.createElement("div",{className:e.root},r.a.createElement(Be.a,null))}var He=Object(Ce.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),ze={color:"red",textAlign:"center",height:20,marginTop:5,marginBottom:"auto"};function Ke(){var e,t=He(),n=r.a.useState({username:"",password:"qwerty",email:"test@test.com",sessionToken:"",objectId:"",signupError:""}),a=Object(c.a)(n,2),o=a[0],s=a[1],i=r.a.useState(!1),l=Object(c.a)(i,2),u=(l[0],l[1]),d=r.a.useState(!0),m=Object(c.a)(d,2),p=m[0],g=m[1],f=r.a.useState(!1),b=Object(c.a)(f,2),E=b[0],y=b[1],h=r.a.useState({usernameError:null,emailError:null,passwordError:null}),v=Object(c.a)(h,2),x=v[0],O=v[1],j=r.a.useContext(F),w=Object(c.a)(j,2),S=w[0],I=w[1];S.context.error,["auth.success","home.idle"].some(S.matches);console.log(S.value);var A=function(e){return e.isLoading?r.a.createElement(Ge,null):""!==e.signupError?r.a.createElement("div",null,e.signupError):r.a.createElement("div",null)},C=function(){g(!p)},k=function(e){return function(t){"username"===e?D(t.target.value):"email"===e?M(t.target.value):"password"===e&&T(t.target.value),s(Object(U.a)({},o,Object(ve.a)({},e,t.target.value)))}},D=function(e){e.length>0&&e.length<3?O(Object(U.a)({},x,{usernameError:"Username too short"})):0===e.length?O(Object(U.a)({},x,{usernameError:""})):O(Object(U.a)({},x,{usernameError:null}))},M=function(e){e.length>3&&!e.includes("@")?O(Object(U.a)({},x,{emailError:"Not valid email address"})):0===e.length?O(Object(U.a)({},x,{emailError:""})):O(Object(U.a)({},x,{emailError:null}))},T=function(e){e.length>0&&e.length<6?O(Object(U.a)({},x,{passwordError:"Password too short"})):0===e.length?O(Object(U.a)({},x,{passwordError:""})):O(Object(U.a)({},x,{passwordError:null}))};console.log("SignUp rendered!");Object(he.g)();return r.a.createElement(ke.a,{component:"main",maxWidth:"xs"},r.a.createElement(we.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement("img",{src:Oe.a,style:{width:200},alt:"logotip"}),r.a.createElement("div",{style:{height:20}}),r.a.createElement(Ae.a,{component:"h1",variant:"h5"},p?"Sign in":"Create your account"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=o.username,n=o.email,a=o.password;console.log("handleSubmit"),p?I("LOGIN",{email:n,password:a}):I("SIGNUP",{username:t,email:n,password:a}),u(!0)},className:t.form,noValidate:!0},r.a.createElement(Ie.a,{container:!0,spacing:2},p?r.a.createElement("div",null):r.a.createElement(Ie.a,{item:!0,xs:12},r.a.createElement(Ue.a,{error:!!x.usernameError,fullWidth:!0,className:Object(Ne.a)(t.margin,t.textField),variant:"outlined"},r.a.createElement(Re.a,{htmlFor:"username"},"Username"),r.a.createElement(Pe.a,{id:"username",value:o.username,onChange:k("username"),labelWidth:73}),r.a.createElement($e.a,null,x.usernameError))),r.a.createElement(Ie.a,{item:!0,xs:12},r.a.createElement(Ue.a,{id:"f-email",focused:o.isEmailFocus,error:!!x.emailError,fullWidth:!0,className:Object(Ne.a)(t.margin,t.textField),variant:"outlined"},r.a.createElement(Re.a,{htmlFor:"username"},"Email"),r.a.createElement(Pe.a,{id:"email",value:o.email,onChange:k("email"),labelWidth:42}),r.a.createElement($e.a,null,x.emailError))),r.a.createElement(Ie.a,{item:!0,xs:12},r.a.createElement(Ue.a,{error:!!x.passwordError,fullWidth:!0,variant:"outlined",className:Object(Ne.a)(t.margin,t.textField)},r.a.createElement(Re.a,{htmlFor:"passwordas"},"Password"),r.a.createElement(Pe.a,{id:"outlined-adornment-password",type:E?"text":"password",value:o.password,onChange:k("password"),endAdornment:r.a.createElement(Fe.a,{position:"end"},r.a.createElement(Le.a,{onClick:function(){y(!E)},onMouseDown:function(e){e.preventDefault()},edge:"end"},E?r.a.createElement(Me.a,null):r.a.createElement(_e.a,null))),labelWidth:70}),r.a.createElement($e.a,null,x.passwordError))),r.a.createElement(Ie.a,{item:!0,xs:12},r.a.createElement("div",{style:ze},r.a.createElement(A,{isLoading:S.matches("auth.started"),signupError:null===(e=S.context.error)||void 0===e?void 0:e.toString()}),S.matches("auth.home.homeidle")&&r.a.createElement(he.a,{to:"/"})))),r.a.createElement(je.a,{disabled:!(null===x.usernameError&&null===x.emailError&&null===x.passwordError),type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},p?"Sign In":"Sign Up"),r.a.createElement(Ie.a,{container:!0,justify:"flex-end"},r.a.createElement(Ie.a,{item:!0},p?r.a.createElement(Se.a,{onClick:C,href:"#",variant:"body2"},"Don't have an account? Sign up"):r.a.createElement(Se.a,{onClick:C,href:"#",variant:"body2"},"Already have an account? Sign in"))))))}function qe(){var e=r.a.useRef(),t=r.a.useRef(),n=r.a.useContext(F),a=Object(c.a)(n,2),o=a[0],s=a[1],i=o.context.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Login to your account"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"username",ref:e})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",placeholder:"password",ref:t})),o.matches("auth.fail")&&r.a.createElement("div",null,i.toString()),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){var n=e.current.value,a=t.current.value;s("LOGIN",{username:n,password:a})}},"Login")),r.a.createElement("div",null,o.matches("auth.success")&&r.a.createElement(he.a,{to:"/Home"})))}var Qe=n(588);function Xe(e){var t=e.children,n=e.machine,a=Object(Qe.a)(e,["children","machine"]),o=n.context.user;return console.log("PrivateRoute() User: "),console.log(o),r.a.createElement(he.b,Object.assign({},a,{render:function(e){var n=e.location;return void 0!==o?t:r.a.createElement(he.a,{to:{pathname:"/login",state:{from:n}}})}}))}var Je=function(){var e=r.a.useContext(F),t=Object(c.a)(e,2),n=t[0];return t[1],console.log("App rendered =============="),r.a.createElement(ye.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(he.d,null,r.a.createElement(he.b,{path:"/login",component:Ke}),r.a.createElement(he.b,{path:"/about",component:qe}),r.a.createElement(Xe,{machine:n,path:"/"},r.a.createElement(Ee,{user:n.context.user})))))};function Ye(){console.log("App1 rendered -----------------");var e=Object(i.useMachine)(N,{devTools:!0}),t=Object(c.a)(e,2),n=t[0],a=t[1];return r.a.createElement(F.Provider,{value:[n,a]},r.a.createElement(Je,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},577:function(e,t,n){e.exports=n.p+"static/media/drip-echo.ec5aa5ba.wav"},580:function(e,t,n){e.exports=n.p+"static/media/logo-bohnenkamp.ae1aeca0.svg"},608:function(e,t,n){e.exports=n(1136)},613:function(e,t,n){},838:function(e,t){},840:function(e,t){},872:function(e,t){},873:function(e,t){},958:function(e,t,n){}},[[608,1,2]]]);
//# sourceMappingURL=main.66e1ddf9.chunk.js.map